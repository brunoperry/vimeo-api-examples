<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Vimeo Simple API Gallery Example</title>
	<style type="text/css">
		ul { list-style-type: none; margin: 0 0 10px 0; padding: 0; }
		li { display: inline; padding: 0; margin: 10px 2px; }
		img { border: 0; }
		img#portrait { float: left; margin-right: 5px; }
		#stats { clear: both; }
	</style>
	<script type="text/javascript">
		
		// Change this to your username to load in your clips
		var vimeoUserName = 'brad';
		
		// Tell Vimeo what function to call
		var oEmbedCallback = 'embedVideo';
		var userInfoCallback = 'userInfo';
		var clipsCallback = 'showThumbs';
		
		// Set up the URLs
		var userInfoUrl = 'http://www.vimeo.com/api/' + vimeoUserName + '/user_info.json?callback=' + userInfoCallback;
		var clipsUrl = 'http://www.vimeo.com/api/' + vimeoUserName + '/clips.json?callback=' + clipsCallback;
		var oEmbedUrl = 'http://www.vimeo.com/api/oembed.json';
		
		// This function puts the video on the page
		function embedVideo(video) {
			videoEmbedCode = video.html;
			document.getElementById('embed').innerHTML = unescape(video.html);
		}
		
		// This function runs when the page loads, and loads in the user's info and videos
		function init() {
			loadScript(userInfoUrl);
			loadScript(clipsUrl);
		}
		
		// This function loads the data from Vimeo
		function loadScript(url) {
			var js = document.createElement('script');
			js.setAttribute('type', 'text/javascript');
			js.setAttribute('src', url);
			document.getElementsByTagName('head').item(0).appendChild(js);
		}
		
		// This function goes through the clips and puts them on the page
		function showThumbs(clips) {
			var thumbs = document.getElementById('thumbs');
			thumbs.innerHTML = '';
			
			var ul = document.createElement('ul');
			thumbs.appendChild(ul);
			
			for (var i = 0; i < clips.length; i++) {
				var thumb = document.createElement('img');
				thumb.setAttribute('src', clips[i].thumbnail_medium);
				thumb.setAttribute('alt', clips[i].title);
				thumb.setAttribute('title', clips[i].title);
				
				var a = document.createElement('a');
				a.setAttribute('href', clips[i].url);
				a.appendChild(thumb);
				
				// Load a video using oEmbed when you click on a thumb
				if (document.addEventListener) {
					a.addEventListener('click', function(e) {
						var link = this;
						loadScript(oEmbedUrl + '?url=' + link.href + '&callback=' + oEmbedCallback);
						e.preventDefault();
					}, false);
				}
				// IE (sucks)
				else {
					a.attachEvent('onclick', function(e) {
						var link = e.srcElement.parentNode;
						loadScript(oEmbedUrl + '?url=' + link.href + '&callback=' + oEmbedCallback);
						return false;
					});
				}
				
				var li = document.createElement('li');
				li.appendChild(a);
				ul.appendChild(li);
			}
		}
		
		// This function adds user info to the page
		function userInfo(info) {
			var stats = document.getElementById('stats');
			
			var img = document.createElement('img');
			img.setAttribute('id', 'portrait');
			img.setAttribute('src', info.thumbnail_small);
			img.setAttribute('alt', info.display_name);
			stats.appendChild(img);
			
			var h2 = document.createElement('h2');
			h2.appendChild(document.createTextNode(info.display_name + "'s Videos"));
			stats.appendChild(h2);
			
			document.getElementById('bio').innerHTML = info.bio;
		}
		
		// Call our init function when the page loads
		window.onload = init;
		
	</script>
</head>
<body>
	
	<h1>Vimeo Simple API Gallery Example</h1>
	<div id="stats"></div>
	<p id="bio"></div>
	<div id="thumbs">Loading clips...</div>
	<div id="embed"></div>
	
</body>
</html>
